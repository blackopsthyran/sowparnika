# Gemini AI Status Guide

This guide helps you check if Google Gemini AI is working in your chatbot and text enhancement features.

## How to Check if Gemini is Working

### Method 1: Use the Test Button (Development Mode)

1. Open the chatbot widget (click "Chat with us" button)
2. In development mode, you'll see a **"Test Gemini"** button in the chat header
3. Click it to test the Gemini connection
4. You'll see an alert showing:
   - ✅ **"Gemini is working!"** - if Gemini is active
   - ❌ **Error message** - if there's an issue

### Method 2: Check Browser Console (Development Mode)

1. Open browser developer tools (F12)
2. Go to the Console tab
3. Send a message in the chatbot
4. Look for these logs:
   - `✅ Gemini is working! Response generated by Gemini` - Gemini is active
   - `⚠️ Using fallback (Gemini not available): [error]` - Gemini failed, using fallback
   - `[Chatbot] ✅ Gemini API successful` - Gemini extraction/response worked
   - `[Chatbot] ❌ Gemini API error:` - Gemini failed with error details

### Method 3: Test API Endpoint Directly

Visit this URL in your browser (or use curl):
```
http://localhost:3000/api/test-gpt
```

You'll see a JSON response:
- `"success": true` - Gemini is working
- `"success": false` - Gemini has issues (check the error message)

### Method 4: Check Server Logs

When running the development server, check the terminal/console for logs:
- `[Chatbot] ✅ Gemini API successful` - Gemini is working
- `[Chatbot] ❌ Gemini API error:` - Gemini failed
- `[Chatbot] ⚠️ Using fallback response` - Using fallback mode

## Common Issues and Solutions

### Issue: "Gemini API key is not set"
**Solution:** 
1. Create or edit `.env.local` file in the root directory
2. Add: `GEMINI_API_KEY=your-api-key-here`
3. Restart the development server

### Issue: "API key format looks invalid"
**Solution:**
- Gemini API keys don't have a specific prefix requirement
- Make sure there are no extra spaces or quotes
- Get a new API key from: https://aistudio.google.com/app/apikey

### Issue: "Gemini API returned an error"
**Possible causes:**
1. **Invalid API key** - Get a new key from Google AI Studio
2. **No credits/quota** - Check your Google Cloud billing
3. **Rate limit** - You've exceeded the API rate limit
4. **Network issue** - Check your internet connection

### Issue: "Failed to connect to Gemini API"
**Solution:**
- Check your internet connection
- Check if Gemini API is down: https://status.cloud.google.com/
- Verify firewall/proxy settings aren't blocking the API

## Gemini vs Fallback Mode

### Gemini Mode (Working)
- ✅ More natural, conversational responses
- ✅ Better understanding of complex queries
- ✅ Can extract multiple search criteria from one message
- ✅ Context-aware responses
- ✅ Free tier available with generous quotas

### Fallback Mode (Gemini Not Available)
- ⚠️ Uses simple keyword matching
- ⚠️ Basic response generation
- ⚠️ Still searches properties and shows results
- ⚠️ Less conversational but still functional

## Verification Steps

1. **Check API Key exists:**
   ```bash
   # In .env.local
   GEMINI_API_KEY=your-api-key-here
   ```

2. **Test the endpoint:**
   ```bash
   curl http://localhost:3000/api/test-gpt
   ```

3. **Check console logs:**
   - Look for `✅ Gemini is working!` messages
   - No `❌` error messages

4. **Test in chatbot:**
   - Send a message like "a house"
   - Check if response is natural (Gemini) or basic (fallback)
   - Check browser console for status logs

## Getting a Gemini API Key

1. Go to https://aistudio.google.com/
2. Sign in with your Google account
3. Click on "Get API Key" in the left sidebar
4. Click "Create API Key" in new project (or select existing project)
5. Copy the API key
6. Add it to `.env.local`:
   ```
   GEMINI_API_KEY=your-api-key-here
   ```
7. Restart your development server

## Notes

- The chatbot works in **fallback mode** even if Gemini is not available
- Fallback mode uses keyword-based search and simple responses
- Gemini mode provides better user experience but requires a valid API key
- All Gemini API calls are logged in the server console for debugging
- Gemini offers a free tier with generous quotas for development
- Gemini Pro model is used for reliable, cost-effective responses

